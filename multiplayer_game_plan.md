# Многопользовательская 2D игра - Обновленный план архитектуры

## Концепция игры
Многопользовательская 2D игра в реальном времени, где каждый игрок управляет цветным квадратиком (4×4 px) с помощью клавиш WASD. Все позиции синхронизируются через WebSockets для мгновенного отображения движений других игроков.

## Техническая архитектура

### Frontend (React)
- **Игровое поле**: Canvas 800×600 px с темным фоном
- **Управление**: Обработка клавиш WASD для движения
- **Рендеринг**: Отрисовка всех игроков на canvas
- **WebSocket клиент**: Подключение к серверу для синхронизации
- **UI**: Список активных игроков, форма ввода ника

### Backend (Flask + WebSockets)
- **WebSocket сервер**: Обработка подключений и движений игроков
- **Состояние игры**: Хранение позиций всех игроков в памяти
- **Управление сессиями**: Автоматическое удаление отключившихся игроков

### Ключевые особенности
1. **Управление WASD**: Плавное движение по 1 пикселю
2. **Границы поля**: Ограничение движения краями 800×600
3. **Уникальные игроки**: Генерация ID, цвета и ника для каждого
4. **Реальное время**: Мгновенная синхронизация позиций
5. **Автоочистка**: Удаление игроков при отключении

### Структура данных игрока
```javascript
{
  id: "player_uuid",
  x: 400,           // позиция X (0-796)
  y: 300,           // позиция Y (0-596) 
  color: "#FF6B6B", // цвет квадратика
  name: "Player1",  // имя игрока
  lastUpdate: timestamp
}
```

### WebSocket события
- `player_joined`: Новый игрок подключился
- `player_moved`: Игрок изменил позицию
- `player_left`: Игрок отключился
- `game_state`: Полное состояние игры при подключении
- `players_update`: Обновление списка игроков

### Игровая механика
- **Размер поля**: 800×600 пикселей
- **Размер игрока**: 4×4 пикселя (визуально)
- **Скорость**: 1 пиксель за нажатие или плавное движение
- **Границы**: X: 0-796, Y: 0-596 (учитывая размер квадратика)
- **Цвета**: Предустановленная палитра ярких цветов

### UI компоненты
- Игровое поле (Canvas)
- Панель управления с никнеймом
- Список активных игроков
- Счетчик онлайн игроков
- Инструкции по управлению

